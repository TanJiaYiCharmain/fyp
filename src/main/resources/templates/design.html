<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeLeaf.org">
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NFT Design Data</title>
<link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
<script src="/bootstrap/css/bootstrap.js"></script>
<style>
/* Styling for the NFT container */
.design-container {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
	gap: 20px;
	margin-top: 20px;
	padding:30px;
}
/* Styling for each NFT card */
.design-card {
	background-color: #fff;
	border-radius: 8px;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	overflow: hidden;
}
/* Styling for the NFT image */
.design-image {
	width: 100%;
	height: auto;
	border-bottom: 1px solid #f2f2f2;
}
/* Styling for the NFT details */
.design-details {
	padding: 20px;
}
/* Styling for the NFT title */
.design-title {
	font-weight: bold;
	font-size: 16px;
	margin-bottom: 10px;
}
/* Styling for the NFT description */
.design-description {
	font-size: 14px;
	color: #666;
	margin-bottom: 10px;
	max-height: 100px;
	/* Limit height to display only part of the description */
	overflow: hidden;
}

.show-more {
	color: #007bff;
	cursor: pointer;
}

header {
	background-color: black;
	background-size: cover;
	background-position: center;
	padding: 20px;
	display: flex;
	align-items: center;
	justify-content: space-between;
}

.nav-links {
	display: flex;
	align-items: center;
}

.nav-links a {
	color: white;
	text-decoration: none;
	margin-left: 25px;
	font-size: 20px;
	padding: 20px;
}

.logo {
	width: 120px;
	height: 120px;
}

.logo img {
	width: 100%;
	height: 100%;
	object-fit: contain;
}

.brand {
	font-size: 50px;
	font-weight: bold;
	color: white;
	margin-left: 10px;
	font-family: cursive;
}

/* Style for the search bar */
        .search-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            
        }

        .search-input {
            width: 300px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            outline: none;
        }

        .search-button {
            padding: 10px 20px;
            margin-left: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .filter-select {
        	margin-top:30px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            outline: none;
        }
        /* Styles for the footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 10px 0;
        }
        
</style>
</head>
<body>
	<div th:replace="fragments/header"></div>
	<div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="Search by theme...">
        <button id="searchButton" class="search-button">Search</button>
    </div>
    <select id="filterSelect" class="filter-select">
            <option value="">Filter by...</option>
            <option value="generating">Most Searched theme</option>
            <option value="popularity">Popular theme</option>
            <option value="Recent">Recent</option>
            <!-- Add more options as needed -->
        </select>
	
	<div id="generated-list" class="design-container"></div>
	<div th:replace="fragments/footer"></div>
	<script>
    function toggleDescription(element) {
        const description = element.previousSibling;
        description.classList.toggle('expanded');
        if (description.classList.contains('expanded')) {
            element.textContent = 'less...';
            description.style.maxHeight = 'none'; // Show full description
        } else {
            element.textContent = 'more...';
            description.style.maxHeight = '100px'; // Limit height to show partial description
        }
    }

    fetch('/api/design')
        .then(response => response.json())
        .then(designs => {
            // Store fetched designs in localStorage
            localStorage.setItem('designs', JSON.stringify(designs));

            const designListDiv = document.getElementById('generated-list');

            designs.forEach(design => {
                const designCard = document.createElement('div');
                designCard.classList.add('design-card');

                // Image
                const designImage = document.createElement('img');
                designImage.classList.add('design-image');
                designImage.src = design.image;
                designImage.alt = 'Design Image';
                designCard.appendChild(designImage);

                // Details
                const designDetails = document.createElement('div');
                designDetails.classList.add('design-details');

                // Title
                const designTitle = document.createElement('div');
                designTitle.classList.add('design-title');
                designTitle.textContent = 'Design Title: ' + design.id;
                designDetails.appendChild(designTitle);

                // Description
                const designDescription = document.createElement('div');
                designDescription.classList.add('design-description');
                designDescription.textContent = 'Design Description: ' + design.prompt;
                designDetails.appendChild(designDescription);

                // Show more/less link
                const showMoreLink = document.createElement('span');
                showMoreLink.classList.add('show-more');
                showMoreLink.textContent = 'more...';
                showMoreLink.addEventListener('click', () => toggleDescription(showMoreLink));
                designDetails.appendChild(showMoreLink);

                designCard.appendChild(designDetails);
                designListDiv.appendChild(designCard);
            });
        })
        
        .catch(error => {
            console.error('Error fetching Design data:', error);
        });
</script>



</body>
</html>
